<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Big J’s Leg Day Timer & Tracker</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #111; color: #eee; margin: 0; padding: 1rem; }
    .container { max-width: 480px; margin: auto; background: #222; padding: 1rem; border-radius: 8px; }
    h2, h3 { text-align: center; color: #00ff99; }
    .timer { font-size: 2rem; text-align: center; margin: 1rem 0; color: #0f0; }
    .btn-group { display: flex; justify-content: space-around; margin: 0.5rem 0; }
    button { padding: 0.7rem; border: none; border-radius: 6px; font-size: 1rem; cursor: pointer; flex:1; margin:0 0.2rem; }
    .start { background: #28a745; color: #fff; }
    .pause { background: #ffc107; color: #000; }
    .reset { background: #dc3545; color: #fff; }
    .section { margin-top: 1rem; }
    label { display: block; margin-top: 0.8rem; font-weight: bold; }
    input[type=number] { width: 100%; padding: 0.6rem; font-size: 1.1rem; border: none; border-radius:5px; background: #333; color: #fff; }
    .step { background: #333; padding: 0.8rem; border-radius: 5px; margin: 0.6rem 0; }
    .highlight { color: #0ff; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Big J’s 30‑Min Leg Flow</h2>
    <div class="timer" id="timer">00:00</div>
    <div class="btn-group">
      <button class="start" onclick="startTimer()">Start</button>
      <button class="pause" onclick="pauseTimer()">Pause</button>
      <button class="reset" onclick="resetTimer()">Reset</button>
    </div>

    <div class="section">
      <h3>Setup Your Game</h3>
      <label>Front Squat TM / 1RM:</label>
      <input type="number" id="tm" placeholder="Enter leg Training Max" oninput="prepareWarmup()" />
      <label>Working Sets × Reps:</label>
      <input type="number" id="sets" value="3" /> × <input type="number" id="reps" value="8" />
    </div>

    <div class="section">
      <h3>Watch the Clock → Do the Moves</h3>
      <div id="stepsContainer"></div>
    </div>
  </div>

<script>
  let timer, seconds = 0, running=false;
  const steps = [
    { time:0, label:"Warm-Up: Empty Bar", pct:0 },
    { time:60, label:"Warm-Up: 50% TM", pct:0.5 },
    { time:120, label:"Warm-Up: 70% TM", pct:0.7 },
    { time:180, label:"Warm-Up: 80% TM", pct:0.8 },
    { time:240, label:"Warm-Up: 90% TM", pct:0.9 },
    { time:300, label:"Work Sets Start: Front Squats", pct:"work" },
    { time:420, label:"Superset Begin: RDLs + Step-Ups", pct: null }
  ];

  function startTimer(){
    if(running) return;
    running=true;
    timer=setInterval(()=>{
      seconds++;
      updateTime(); highlightStep();
    },1000);
  }
  function pauseTimer(){ clearInterval(timer); running=false; }
  function resetTimer(){ pauseTimer(); seconds=0; updateTime(); highlightStep(); }

  function updateTime(){
    const m = String(Math.floor(seconds/60)).padStart(2,'0');
    const s = String(seconds%60).padStart(2,'0');
    document.getElementById("timer").innerText = `${m}:${s}`;
  }

  function prepareWarmup(){
    const tm = parseFloat(document.getElementById("tm").value) || 0;
    const sets = parseInt(document.getElementById("sets").value) || 3;
    const reps = parseInt(document.getElementById("reps").value) || 8;
    const container = document.getElementById("stepsContainer");
    container.innerHTML = "";
    steps.forEach(st => {
      let weightInfo = "";
      if(st.pct && typeof st.pct === 'number') weightInfo = ` → ${Math.round(tm * st.pct)} weight`;
      else if(st.pct === "work") weightInfo = ` → ${sets}×${reps} @ ~${Math.round(tm*0.7)} each set`;
      container.innerHTML += `<div class="step" id="step${st.time}">${formatTime(st.time)} - ${st.label}${weightInfo}</div>`;
    });
  }

  function highlightStep(){
    steps.forEach(st=>{
      const el = document.getElementById(`step${st.time}`);
      if(seconds >= st.time && seconds < st.time + 60) el.classList.add('highlight');
      else el?.classList.remove('highlight');
    });
  }
  function formatTime(t){ const m=String(Math.floor(t/60)).padStart(2,'0'), s=String(t%60).padStart(2,'0'); return `${m}:${s}`; }
</script>
</body>
</html>
